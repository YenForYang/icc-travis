language: c
sudo: false
env:
  global:
    - secure: "UBudgeEwCcW9lHwFM8MBudW8IisCE7nsgdNeeKY8Fe+ProrcR4xk/e/E0BeRrLrggCz6NYRt8DYupsr1+cmCg3+sKeMaheinRjLV/QX0J4JvITAlPvDVS8OmEMHaehchgIajSDpAuh02TK4GSuDuLVTIZj52MC4xXVZdZQGkiTFfUbvOumlUN4LrWQgSLpoGaUDg97KNIkI8sMIb9yy0DkD3cz7/isC0p2Dh5Ks9jsnM7Tu5ZVqk8zkR3aHMoftE9eQPAtOszMCFm/xG4YUp0qHcOC2xA4FNFabInFGKCGI0JS2R/L3+4mSeg8x0SIBLC75Ru+O9PLgzyaGfRn8q2ohyDnWtznF4LrWhxl8WnG42tooRKNW389OT+n4jYs4bj/Zm6vkTTDbGd5hrBEqBU8gr6SqIWnROXkVWM1CL7gNT19IkVJ1wgKkJqIaYfvXbXTokIjpheEbv113yJSvFnnXfoUoQ2eOrmTX2Otqm4/t6z8GObUClpmSZKBmPSwn1CEg1Ej2pzrX33TIrP1sh9l+h9p8PF0Mq8sL0I5wFeTKHn9E4xsoh4UdsOSkzhFsB+ritmJPZWnGNuLnLV6qf1E5q9LDs3AaaUUBVr6NayWrmUOrFR/v58VFT5907o4nQbiZfB0L+z3h9Al2wMxRtzX8cf7VSJp+GvQsqDRMq8zY="
matrix:
  include:
    - os: linux
      sudo: false
    # - os: linux
    #   sudo: required
    # - os: linux
    #   sudo: required
    #   dist: trusty
  #allow_failures:
  #  - os: linux
  #    sudo: false
before_install:
  - ./install-icc.sh
  - source ~/.bashrc
script:
  # C99 compiler
  - icc    -std=c99          test/test.c           -o test/testc
  # C++11 compiler
  - icpc   -std=c++11        test/test.cxx         -o test/testcxx
  # Cilk extensions in C (on by default)
  - icc    -std=c99          test/testcilk.c       -o test/testcilkc
  # MPI-3 library
  - mpiicc -std=c99          test/testmpi.c        -o test/testmpic
  # IPP library in C
  - icc    -std=c99    -ipp  test/testipp.c        -o test/testippc
  # DAAL library in C++
  - icpc   -std=c++11  -daal test/testdaal.cxx     -o test/testdaalcxx
  # TBB library for C++
  - icpc   -std=c++11  -tbb  test/testtbb.cxx      -o test/testtbbcxx
  # MKL CBLAS library
  - icc    -std=c99    -mkl  test/testmkl.c        -o test/testmklc
  # Fortran MKL runtime
  - ifort  -std08      -mkl  test/testmkl.f90      -o test/testmklf90
  # Fortran 90+ compiler
  - ifort  -std08 -fpp       test/test.f90         -o test/testf90
  # Fortran MPI-2 library
  - mpiifort  -std08 -fpp    test/testmpi.f90      -o test/testmpif90
  # Fortran 2008 MPI-3 library
  - mpiifort  -std08 -fpp    test/testmpi_f08.f90  -o test/testmpif08
notifications:
  email:
    on_success: change
    on_failure: change
